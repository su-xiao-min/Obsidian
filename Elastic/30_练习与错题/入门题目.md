## 3) 20 个自测题（从易到难，无答案）

### 基础认知（1–6）
1. Elasticsearch 中的 “Index” 最接近关系型数据库中的哪个概念？
2. 什么是倒排索引？请用一句话描述其作用。
3. 一个索引有 3 个主分片和 1 个副本，集群中共有多少个分片？
4. 为什么 Elasticsearch 默认不能对 text 类型字段做精确匹配（term query）？
5. `_source` 字段在 ES 中有什么作用？关闭它会带来什么影响？
6. 请列举三种常见的内置分析器（Analyzer），并简述它们的区别。

### 核心原理（7–13）
7. 解释 refresh 操作的作用，以及它默认多久执行一次？
8. 为什么 filter 上下文中的查询不会影响文档的相关性得分？
9. 如果一个索引的 number_of_shards 设置为 5，之后还能修改吗？为什么？
10. 当写入文档时，ES 如何决定该文档应路由到哪个分片？
11. 在 Bool 查询中，must、should、must_not、filter 各自的作用是什么？
12. 什么是 translog？它在数据持久化中扮演什么角色？
13. 如何设计 mapping 使得某个字段既能用于全文搜索，又能用于聚合（如 terms aggregation）？

### Java 集成与工程（14–20）
14. 使用 Java API Client（8.x）如何构建一个 term 查询？
15. 在 Java 中如何批量插入 1000 条文档？写出关键步骤（无需完整代码）。
16. 如何在 Spring Boot 中配置 Elasticsearch 的连接地址和认证信息？
17. 使用 Java 客户端执行聚合查询（如统计某字段的不同值数量），关键类或方法是什么？
18. 如果 ES 集群响应慢，你在 Java 客户端层面可以做哪些调优？
19. 如何利用 Java API 对某个查询进行性能剖析（profile）？
20. 假设你要实现“高亮显示搜索关键词”，请描述在 Java 中如何构造请求并解析响应中的高亮片段。

---

你可以先尝试回答这些问题，再对照官方文档或实践验证。需要答案或详解时，随时告诉我！