苏小旻
“面试官好，
我是书倌，
我们学院的培养方案主要聚焦于
1. 信息服务
2. 数据挖掘
3. 数据治理 
 我的技术兴趣和积累主要在
后端开发与系统设计上，

我 熟练掌握Java Spring生态，
 并有使用RabbitMQ、Redis等中间件
解决实际并发与一致性问题的项目经验。
 （这里从“我会什么”转向“我做成过什么”）

在我主导的博客项目中，
 我针对用户体验与安全的矛盾，
 设计并实现了双Token无感刷新方案，
 将用户登录中断率降低到零。

 在文物图片检索平台的项目中，
 我面对异步链路复杂、 状态易丢失的挑战，
 用Redis设计了状态机与补偿机制，
 保障了任务的可追踪与可恢复。

我在系统的设计中，
学习了很多组件，
我选择使用Canal作为最终一致性的保证。
避免了分布式事务的复杂实现，
我也通过亲自部署DeepSeek-OCR，
感受了向量嵌入在语义检索中发挥的作用。

经过这些项目的开发。
我体会到了复杂系统的设计的共通之处和差异，
我多次为了项目当中遇到的问题，
选择自己设计的解决方案，
但是，
我很快发现，
这些方案存在问题，
思路正确，
不过已经有了更加成熟的方案。
通过对于它们的学习和比较，

 我深刻意识到，
 课堂理论与工业级复杂度之间存在鸿沟，
也感受到了不同中间件在解决性能与安全问题方面
所进行的取舍，
感受到了我们的需求、我们选择的数据结构、我们选择的语言和计算机底层的实现之间的复杂关联。
 因此我强烈渴望加入一个拥有严谨工程实践的团队，
 在实战中打磨我的系统思维和架构能力。
这就是我寻找这次实习的核心原因。
”(所以，准备好一个好的自我介绍还是很有价值的。)

面试官  02:45
好的，
还是准备的比较充分的是吧？这个自我介绍，
问一下，
为我看您这个背景，
我看您这背景,
在那站着办公吗？还是咋了这里？

苏小旻
在图书馆，
我选择了一个可以放电脑的平台，
为其他的场景是要有人在学习。
(鬼知道哪个人抢了我的面试厅，
结果压根就占着不去，
当然，我怀疑可能是学校的系统出故障了)

面试官  03:06
问点那个求职意向的事情，
该上面面试官应该应该跟你沟通过，
吧？北京或者上海都可以的是吧？

苏小旻
是的，
北京上海都可以？

面试官  03:25
你自己倾向你更希望哪里呢？

苏小旻
更想去上海。

面试官  03:30
搁在上海是吧？行 OK 呃，
第二个就是你自己的实习计划，
大概是怎样的一个安排？你平时计划？

苏小旻
我可以在年后一直
我可以从现在开始立刻去实习，
年后也是可以去实习的，
也跟我们辅导员进行交流了，
她就鼓励我去明确我自己的职业规划，
(我没有撒谎，
虽然辅导员还没有直接回答我学校的课该怎么办。)
打算是先在字节跳动去感受一下你们的团队氛围，
(梦中情司！)
去提高一下自己的项目能力，
后我再去做进一步的规划。

面试官  03:58
实习过程这个表现比较好，
公司或者团队的事情符合你的预期，
考虑那个希望有那个转正的机会。

苏小旻
我求之不得，
字节跳动其实也是我梦中的情思。
之前去过字节跳动的一个办公楼，
也感受到了大厂的氛围，
自己本人是挺喜欢这种感觉的。

面试官  04:24
没关系，
我们之间不用那个都是搞搞研发的。
然后就是我们简单点务实一点就好了，
后面假设面试比较顺利，
 HR 面的话你给她说就好。

苏小旻
好的好的。

面试官  04:41
行，
我们开始这个正式的技术面试啊，
说实话我也比较喜欢能长期实习的同学，
你表现好的话，
也想把你留下来，
培养一个同学，
也是比较花时间的，
所以我就我们大家诉求是一致的，
只能说是那个还是有还是有比较多的这个转正机会的，
具体的情况因为每年的校招政策也不一样，
可能具体的情况一般要到那个校招开始的时候，
才会大概的知道，
一般都没问题。

面试官  05:20
开始技术面试，
问你个 Java 的问题吧，
「心凉了，忘记复习Java了」
Java 里面你要把一个这个纯 int64 或者 long 的类型，
强转给一个 double 会有什么问题啊？

苏小旻
它可能存在一些长度的丢失，
为就是 double 它存在的范围。

面试官  05:44
能讲一下为什么会出现这个精度丢失的情况吗？那 double 不是可以存的数据范围很大吗？为什么会有你说的这个丢失的情况？

苏小旻
因为 double 它因为就是 long 和那个 double，
都是相同长度的，
相同空间，
long 它就是完全为了整形进行存储的，
我们的 double 它采用的是双精双精度的模型。
言之，
是它使用那个就是它是，
是分别记录它整数的小数位的，
是它跟 long 的设计的需求是不一样的，
以说倒透就是我们转换的过程中是不能保证完全都转换过去，
我们在场景中需要考虑避免的，
就直接说强行转换。
(我要怎么说，
实我根本没有好好看Java相关的内容
太恐怖，

但是真的感觉自己要无法回答出来了。
双精度是怎么东西来着，
浮点数为什么叫做浮点数，
浮点数的精度问题是怎么回事来着，
浮点数的存储范围又是什么来着？)

面试官  06:22
嗯，
的，
教就是那个，
如说在 Java 中你开辟一个那个比较大的那个 arraylist 嘛，
如说可能 128 兆或者更大的那种，
在那个物理内存的存储上一定是连续的吗？

苏小旻
嗯，
我觉得可能我觉得可能是有拆分的，
为它最后就是我们的 JVM，
其实是有内存片的，
是它是有分非常多分片的，
以说就是可能就是我们 JVM 
它把这个实际上拆分的东西映射到连续的数组，
类似于我们的虚拟内存的那种连续。

面试官  07:00
序列对吧？那那这种情况下，
还怎么能实现这个 O(1) 的这种检索呢？就假设它空间不连续，
它如何能快速的检索到呢？
根据根据下标或者偏移量检索到对应的数据呢？
(面试官后来说了，
他希望我回答出来，
从虚拟地址到实际地址的映射，
很可惜，
没有。）


苏小旻
它不连续，
它整体上还是连续的，
我们的操作系统也进行了一定的映射。

面试官  07:20
能能详细的展开一下吗？
就这块到底是个什么样的一个情况？

苏小旻
因为它我觉得可能就是它在那个点，
它在那个分界点的时候，
它会有一个指针指向它另外一个区域，
到最后就是我们只使用之前很有限的指针跳转，
就可以到位置，
或者说它像我们的分级存储就是分级检索，
然后最后就是我们先定位我们的上一层，
最后再快速的定位到底层它那个具体位置，
但这一块我不太确定。
(真的不确定，
感觉不需要答得这么细节。
只需要说，
我们的Java其实对于ArrayList进行了一定程度的抽象。
它可以分块存储ArrayList的指针，
不同区域的指针按照不同的内存地址的计算，
对于上层来说，
这种抽象是无法感知到的。


面试官  07:48
好的，
为我我在现场。

苏小旻
因为我文件系统就是大概是这么实现的。

面试官  07:52
嗯，
的，
问题，
，
，
后看那个图片解锁，
实是用来Elasticsearch来实现对吧？

苏小旻
是的啊。

面试官  08:01
呃，
里其实我我简单理解一下是不是你是相当于是给图片，
通过那个 OCR 去搞了一些图片的关键词出来，
后那个本质上你还是一个文本的搜索，
据文本去检索图片的。

苏小旻
是的，
这里也采用了向量化技术，
调用了一个向量模型的接口返回了，
后最后就是我们Elasticsearch它是支持向量检索的。

面试官  08:23
嗯嗯，
哎，
我问一下，
如说Elasticsearch里面这个倒排索引是个什么概念，
了解吗？

苏小旻
这个也是我们专业课的一部分内容，
信息检索就是我们的正经专业课(还有不正经的专业课吗？)，
相当于就是说给我们一个文献，
最后我们会有提出提供很多很多关键词，
我们可以直接看到倒排索引，
就是反过来说，
我们以我们这些关键词为核心，
我们就得到一个关键词，
它对应一个文档的列表。

面试官  08:49
嗯，
，
你知道，
Elasticsearch它的那个索引的底层大概是个什么样的实现吗？

苏小旻
(这个真不会了……)
它索引底层其实就是其实就是我们的不断的分片，
到最后就是我们把一个索引把一个索引映射成很多个分片，
最后就是我们通过检索不同的分片，
把我们结果返回回来，
就是基于我们倒排索引，
后然后把那个分片结果。


面试官  09:12
把这个这里我我其实想问的一个问题是就是 
Elasticsearch的索引是支持实时更新的吗？就是可以不断。

面试官  09:21
通过接口去插入那个插入文档的嘛，
不对，
是可以插。

苏小旻
它是可以插入文档的，
但是它的写机制是存在双段写入的，
为了提高我们的性能，
就是先进行 refresh 
再进行 flush，
这也是我后来对比 MySQL 和 Redis 的时候感到的一种共通之处。
但是Elasticsearch它对于我们的强制性要求不是很高，
它自动保证的是最终一致性。

面试官  09:41
嗯嗯，
，
我们先不考虑它那个分片，
就是就是相当于它的副本和一致性的这件事情，
我们就单说假设，
一个索引里面，
它要更新的话，
是怎么什么机制能保证这个索引。
既提供了或者说它是一个什么样的数据结构吧，
它既保留了这个索引能高效的查询，
又保证它可以这个比较快速的更新。

苏小旻(真的不会，
明提问的是数据结构，
在回答的是机制……＞﹏＜)
就是我刚才说的双双写入机制，
是我们首先是通过 refresh 把它写到我们内存段当中，
样的话就是一个比较快添加的操作，
后我们再通过 flush 操作，
后把它刷盘到我们的磁盘当中进行持久化。

面试官  10:18
啊，
，
这是它的一些这个呃，
层的优化机制嘛，
是它数据结构是个啥样子的。

苏小旻
数据结构哦！

面试官  10:24
所以你去做是个啥样子？

苏小旻
啊，
个我不太，
不太确定。
(面试官这里其实非常失望了，
他可以接受我不了解，
但是，
没有想到，
我一点知识迁移的能力都没有，
我知道跳表，
但是我不知道，
这里也可以使用跳表，
果然，
数据结构都有着广泛的使用，
Redis和Elasticsearch在这里也达成了共时，
但是，
想不到)
面试官  10:29
啊，
有看是吧，
没关系，
关系，
个问的比较深了啊，
我其实想看看你那个了解到什么程度啊，
那我再问问 Redis 吧。
嗯，
Redis的话你了解 Rediscluster 吧。


苏小旻(不了解一点……
为什么你总是可以精准地问到我不知道的地方，
分布式……)
就是外地的集群部署，
实。
通过我们很多个 Redis 部署，
免了我们在分布式事务当中，
果一个 reddit 它宕机了，
后可以让我们继续服务，
续可用。

面试官  10:54
啊我我不是想说的那个主从的问题，
我是想说的这个。

面试官  10:58
我换个问法吧，
就是比如说 Redis这个内存数据库吧，
然后那个那内存终归是有限的嘛。
当你一个数据，
当然你这个业务需要存储的数据量特别大的时候，
你可能一台机器无论如何都是存不下的。
以就比如说遇到这种情况，
我给你三个 Redis 的实例，
你能把一些更多的更大量的数据，
然后给存到这三个 Redis 里面，
这个比如说你可以知道 Rediscluster 官方实现去讲它的实现，
如果不知道，
那就应该怎么做都可以。

苏小旻(所以，
知识迁移的能力我是一点都没有。

我觉得可以使用哈希映射，
就是我们先把我们的那个业务数据，
数据，
后我们进行一个把它的键进行一个哈希的转换，
到最后就是我们对定定义规则，
把它存在不同的 Redis 当中不同的 redis。

面试官  11:43
好的好的，
个规则你怎么定义的，
对，
其实就想知道你的规则怎么设计。
这种 Redis 官方是咋设计的都可以。

苏小旻
我觉得就可以使用哈希哈希算法来进行进行处理，
然后都把它映射到一个固定区域内，
然后最后就是我们不同的哈希的区域，
然后最后就是存到我们不同 Redis 当中，
就类似于我们的类似于我们那个负载均衡的操作。

面试官  12:04
啊对，
然后我其实就是这个，
咱再稍微具体一点啊。
就是还是算法，
就是就举个例子，
比如说你想分多少个区，
然后你打算怎么设计，
就是其实怎么我就是把这个事情的完整的实现我们讲出来，
我其实想的是这个。
现在这个这个命题，
比如说这个需求就给到你了，
那么接下来问题好，
你要写代码了嘛，
那你分你怎么分，
少个区，
是直接那个哈希完了模三，
然后存在这三台机上还是要做一些什么样的设计，
实我想听你的这个这个我觉得我觉得。

苏小旻
我觉得需要考虑，
是说我们的业务它是否需要去支持我们的，
要支持我们的范围查询，
最好不要直接哈希
我们可以采用一些类似于跳表来进行优化，
保证我们相对连续区域是在一块的，
我们可以就是我们的数据，
也先把它进行分块，
再来进行我们hash 的选择，
保证了我们支持我们的范围查询，
就是我觉得也要考虑我们的数据量和我们的 Redis 它能够存储的关系，
我们也不能说保证不能说太多的 Redis 的进行分块。

面试官  13:11
你考虑到了呃范围查询这件事情，
Redis 本身支持范围查询?

苏小旻
它支持范围查询，
因为它……

面试官  13:18
那他是怎他咋支持的范围查询呢？

苏小旻
说的是那个 Redis 的 Zset 它是支持 范围查询的，
它用了跳表。

面试官  13:26
我们我们不讨论 Zset 的问题 Zset 本身是有 K 的呀

苏小旻
 Redis 的查询结构好像它好像就是简单是，
是内存结构，
以说它的随机查它的随机 I/O 是非常快的，
好像就是它可以直接去支持范围查询。

面试官  13:44
对呀，
呀，
如果大家那么在这种情况下就是哦，
设你不考虑刚才你提的范围查询的这个点，
我们再稍微具体点，
咋设计？就是你刚才说小哈希，
那我现在，
说一台单机一台的单机的实例
就是一个 32G 的一个机器，
然后呢那个 32G 内存的机器，
现在呢就是有 50G 的数据要你存，
给你三台这个 Redis 实力你怎么做呢？就我们稍微具体点，
体点怎么实现呢？

苏小旻
就是就是我的一个 Redis 不够，
后我有非常多数据，
希望就是把这个数据进行分开，
开来进行管理，
我觉得就是直接可以直接看，
是我们从我们数据结构来进行定义，
是我们，
们的哪些数据结构是需要在我们的快速一次查询中返回的，
尽可能不要在查询中调用多个 Redis 来进行控制。

苏小旻
就是根据我们业务需求来定义来定义我们分化的策略。

面试官  14:36
行，
设都是简单的，
单的 kv 就是非常简单的 kv 然后业务都是单点查，
没有你说的这种连续产品的情况，
我我其实特别想知道的，
是说你刚才说的从哈希到 reds 的存储上，
段你到底怎么设计，
我说白了，
就特别想哈希。

苏小旻
哦，
，
且哈希它其实也存在一个问题，
是说我们的哈希值可能最后结果是一样的，
样的话就是我们可以，
觉得我们可以使用那个 list 这种结构来进行，
避免我们哈希重复的问题，
且如果说我们不需要考虑范围查询的话，
就直接直接对我们的值进行，
希设就可以了。

面试官  15:12
嗯，
刚才你说的，
如说简单的 模3 就可以了是吗？

苏小旻
就是使用一个例子来避免我们的重复的哈希，
就是相当于我们直接在使用这个是那个哈希表。

面试官  15:25
那这种情况下，
你想考虑过另外一个问题没有，
就是因为业务将来数据量可能会越来越多的，
将来有一天可能你三台机器存不下了，
那如果你要再加入，
比如说存不下了怎么办？
加机器呗，
就再加一台，
接来后再加两台接来，
那这个过程的时候，
你考虑过这过程的数据怎么迁移，
以及 Redis 的过程中能否继续继续提供服务吗？
就这些是这块设计上。

苏小旻
这也是普通哈希表扩容的一种方式，
是就是说我们当然扩容的话
就是你肯定要对哈希算法进行一些重新的进行计算，
为我们本来就是我们只能映射到三台上，
哈希表它实现的时候，
就成了二进制，
是它保证它的集群都是 22 的二的 N 次幂，
样的话就是我们在扩容的时候，
实相当于我们把原来映射到二的地方，
分别移植到二和四这两个集群上，
是这个我们实际。

面试官  16:14
啊，
明白了，
我明白了，
其实你想是借用的那个 hashmap 的类似这种那个空的实现方法，
然后去完成你这个 Redis集群的设计，
对吧？

面试官  16:23
对，
但这样的话比较局限，
因为你 hashmap 用的是内存嘛，
所以你按二的次方整整数对齐就好了嘛，
那你总不能要求这个工业生产中用到的 Redis，
每次都得按两倍来翻翻倍吧。

苏小旻
哦，
就是我需要去，
也就是说我需要去设计一种算法来保证，
就是支持它的快速的 Redis 进行扩容，
就是新的 it 机器之后，
给到一些数据。
(凉，
简单的固定槽位映射，
但是，
什么我就是不知道呢……
真的就，
但凡第一面，
好吧，
是三面)

面试官  16:44
算了算了，
个这个问题不问了，
大概知道你的一些想法了，
就是 OK 我我继续问一下 reits 自己本身的吧，
 reits持久化你了解吗？

苏小旻
我了解过，
就是它它有两种持久化，
所以一种是 rdb，
1 种是 aof
rdb，
就类似于就是我直接使用二进制数据，
保留我 Redis 当前的一个快照，
但是这样的话就是成本比较高，
所以 Redis 它一般来说是默认默认手后台进程来进行添加的。
另外一种就是 aof 就是只保存一个当前一个操作一个切片，
这样的话就是它是效率非常的高，
但是它也存在一些，
就它也存在一些问题，
就是说我们必须要去有原本的那个 Redis 的状态进行还原。


面试官  17:23
嗯哎，
个 aof 的机制类似于 MySQL 的什么机制？

苏小旻
他就是 my circle 的那个redo log。

面试官  17:30
好 yeah。

苏小旻
还有也是类似于冰 logo，
是两个尺度不太一样。

面试官  17:33
嗯嗯，
，
后那个好，
我们刚才你说到了 rdb 模式，
果它为了性能，
般会开一个后台线程还是进程来做这个事情。

苏小旻
嗯，
一般来说线程啊，
对啊 Redis 对是。

面试官  17:49
呃，
想一下是线程还是进程？

苏小旻
进程 Redis。

面试官  17:53
啊，
进程是吧？那进程我就要问你另外一个问题了，
是进程的话，
程的话其实你解决了一个问题，
通信你不用解决了，
父子进程嘛吧。
那接下一个问题啊，
在生成这个子进程的时候，
不会导致它的内存占用翻倍嘛，
想它又是一个本身我刚才讲了 Redis 就是一个内存数据库嘛，
你这个 effect 生成子进程的时候会不会导致它内存占用翻倍啊，
同时换句话说，
是导致你这台机器数据不能存太多，
吧，

苏小旻
Redis 它可以尽可能进进行轻量的作用，
为它就是完全基于内存，
是说我们这个子进程，
是可以不用分配太多内资源空间的，
为它仅仅是进入，
仅仅是对于我们已有的一个共享内存的一个进行一个拷贝而已。
样的话，
觉得应该是可以比较轻量的实现的，
为我们的进程它耗用大，
要是因为它占它也需要自己内存空间进行一些自己的一些内容资源的分配。

面试官  18:49
嗯，
，
其实你想按我们线程和进程的定义，
程之间，
们自己的内存东西空间应该是独立的，
种情况下为什么看按你刚才讲的，
，
不会导致它的内存占用直接翻倍吗？

苏小旻
主要是我们的对进程的资源分配是考虑它的需要来的。
一般来说，
如果是多进程的话，
是它每个可能需要比较独立的那个空间，
它不是共享。

苏小旻
而且其实我我现在想，
其实不太确定 Redis 它到底是什么进程，
程还是线程，
觉得这个场景下可能甚至说我们的进程线程会更合适一些，
是 Redis 它其实它好像最后也是支持多线程的，
是它的传统的操作好像是单线程来实现的，
里就是我可能。

面试官  19:30
但是我可能其实其实我我想问的就是刚刚才我们说到的这个过程，
如果我知道就是进程有额外的开销，
其实没啥问题，
它里面。
存的那么多大量的数据，
起来这点开销不算什么，
我其实想问的是说，
然数字进程，
们说他俩内存空间是独立的，
比如说是不是就是父进程用了多少空间，
放个这个进程？

苏小旻
这个完全这个完全不是啊！

面试官  19:59
不是啊，
为什么不是呢？你把这块逻辑给我讲一下怎么想呀，
是说。

苏小旻
就是说我们可以，
们可以从共享内存的策略，
们对进程资源的调配也是可以我们自己来手写的，
好像说你在 gvm 当中，
就是可以可以直接通过一些前参数来定义你的内存分配，
以说 Redis 它即使要实现通过多进程，
也完全可以定义有限的那个内存占用的分配。

面试官  20:21
啊行，
那其实接下来就下一个问题了，
那个你主进程在 dump 的时候副进程还在继续对外提供读写服务吗？

苏小旻
是的好的。

面试官  20:30
是的，
果这时候有有有新数据写入怎么办呢？
(为什么我没有想到CopyOnWrite，
伟大的JUC，
为什么我就不能汲取你思想中的精华，
实现场景迁移呢？)

苏小旻
因为它本身就只是一个阶段的快照而已，
就下一个 rdb。

面试官  20:41
你刚才说的，
他用的是共享内存这块儿之后，
不考虑吗？不考虑这块儿问题怎么解决吗？那那按你的说法，
就变成父进程改数据，
响到了子进程的这个里面的数据吗？

苏小旻
这个我记得 MySQL 它是使用 MVCC来来解决这个多版本读写的问题的，
是 Redis 它怎么实现这个我我就不太确定。

面试官  21:05
啊行好的哎，
听过一个概念叫写实拷贝吗？Copy On Write?

苏小旻
嗯，
知道，
是说你所有的写其实都是创造一个新的东西，
我们 Docker 它也是写实拷贝。

面试官  21:16
嗯啊，
，
实其实这就是父子进程里面的那个呃，
个一个最基本的内存的机制，
是写实拷贝啊。
(这也就是非科班生的坏处，
你看我像是学过进程之间通信方式的人吗？)

苏小旻
也就是说，
Redis 写的都是直接写一个新的东西出来。

面试官  21:28
后面是他俩的。

面试官  21:30
就是其实这个问题是我接着你和接着我上面问的第一个问题，
个内存连不连续这件事情，
实它是一个问题，
那线进程之间，
的虚拟地址空间是各自独立的呀，
它只是指向同一块物理内存而已。
当这个数据有变化，
中有一个线程要写的时候啊，
其中一个进程要写的时候，
会把这个物理内存重新复制一份，
后他们各自指向各自的那个工具内存就好了。

苏小旻
这样就解决并发的问题。

面试官  21:58
解也解决了刚才说的数据翻倍的问题，
其实我想问这个问题。

面试官  22:02
再问下一个问题。
Redis的超时机制是怎么实现的？Redis。

苏小旻
就是你可以使用 set 然后 expire然后的话我们一般来说，
们要使用那个 lua 脚本来保证这个一致性，
后它还有它有一个命的值。

面试官  22:19
可以有一个命令，
说的过期，
说它的过期机制就是你可以设置那个那个 expire 时间嘛，
吧，
期时间嘛。

面试官  22:26
就如果它过期的话，
 key 是怎么删除的，
想问这个。

苏小旻
它只是一个逻辑删除，
是说它其实 Redis 当中有，
是已经默认它是过期了。

苏小旻
就就是不会来检讨这个数据了。

面试官  22:39
哦，
，
这样的话，
到底那它还在内存里啊，
按你这说法，
果一个如果一个 Redis，
，
是一个血多毒少的场景，
那个但是它每个 K 可能都会设一个过期时间，
如说呃。

面试官  22:53
几十分钟，
个小时这种，
那那些积压的 K 如果一直按你说的呃，
只是一个假山或者干嘛的话，
这个内存不会占用越来越多吗？

苏小旻
他都他都应该是有一个线程来进，
个进程在进行这些操作删除这样操作的。

面试官  23:11
对，
怎么做呢？怎么做的？

苏小旻
再启再启动一个线程，
后就是把这些数据把这些数据，
后就定期的把它压缩下去。
果说我们遇到内存不足的情况，
者说遇到一些其他的一些需要我们那个进行我们数据操作场合都会直接批量删除这过去的数据。

面试官  23:27
嗯，
我想问的不就是说怎么实现吗？
这个问题给到你了，
那个 K 上都带超时时间，
现在呢时间到了，
要删除嘛，
这个你用一个什么样的数据结构来维护这个 K 的超时时间，
用一个什么样的机制能保证这个呃，
能这个定期的删掉里面的过期的。
后释放内存呢？对，
其实想知道具体的就是我说希望一些落地的具体的设施。

苏小旻
计一个数据结构，
后我觉得其实。

面试官  23:57
我觉得是数据结构还是方式机制都可以。

苏小旻
我觉得就是你需要去维持，
就是可以使用那个我们像我们的，
我们的那个有序集合这种结构，
批量的把图部删除，
或者说像我们的堆，
可以实现类似的效果。

面试官  24:18
相当相当于相当于是你用过期时间做 K 是呃，
过期时间做你这个堆的 K吧？

面试官  24:25
然后那个你 Redis 的那个 K，
后作为 value，
后你经过维护一个堆或者维护一个什么来，
个比较方便去查过期时间。

面试官  24:33
是这个意思吧？

苏小旻
但感觉其实好像也或者说我们就直接。

苏小旻
直接使用哦，
该是还是要使用对，
为它的数据是连续的，
需要排序了排序，
为了方便找这个每一时刻的那个比较比这个时间小或者大的那个过期时间嘛，
吧？

面试官  24:53
K 这个是一个常用的设计方式，
首先 Redis 不是这么做的，
可以了解一下。

苏小旻
好的好的。

面试官  25:00
这个这个肯定会影响新闻的呀，
 Redis 本身是不是很简单？

苏小旻
是的是的，
没有必要。

面试官  25:05
假设一些非常简单的 kv 操作，
要整这个结构进去，
能直接降一半啊，
的是的。

苏小旻
是的是的，
想我在想一下还有什么其他的结构可以实现这种方案。

面试官  25:13
嗯，
没关系，
关系，
是总之呢，
是呃，
先我跟你说第一点不用紧张，
用紧张，
后因为我问的这个问题呢，
一定是一个对实习生的要求，
只是想看看你了解到什么程度，
你了解的越深，
来说就会多的加分项。

苏小旻
是的对。

面试官  25:25
所以这个这个你不用，
不用担心，
是想看看你怎么怎么想的，
个东西不一定你非常了解，
是想看你想怎么解决它。
问你一个 linux 的命令吧。
如说 linux 操作系统里面啊，
你个进程名，
如说就叫 my server，
吧。
写个进程叫 my server 给你个进程名，
怎么去找到这个进程并杀掉这个进程啊？

苏小旻
你就直接先查查到他的那个 id 就行了，
后查到他那个 id，
如说 lsof 这样。
你就先使用 llfos 这个命令，
后找一个进程的 id，
后都直接 kill 杠九，
后最后把那个 id 输上去就可以把它删掉了。

面试官  26:04
kill & kii -9 有什么区别？

苏小旻
因为 kill -9 kill 它只是对我们的线程发出一个指令，
这个指令它最后这个进程它怎么响应得看它自己的内部实现。
 kill 杠九就是直接强制删除，

制的停止这个进程。
当时项目中其实也也出现很多问题，
是我使用 Java run 的时候，
Java 多开的时候就发现它有非常多，
有非常多 Java 进程，
且它各自有不同的端口，
是我当时就是为了控制我端口，
后也是使用很多 kill 的命令来杀。

面试官  26:36
这种方式是进程间通信的哪一种方式啊？

苏小旻
有一种方式直接发通发通信，
后就通过通信来进行那个信号。

面试官  26:52
信号很好，
K 信号就对了嘛，
不都已经kill -9 了吗？这不就是信号吗？

其实我看你用了 docker 对吧，
能也了解一些。
Docker 我 Docker 问你一个，
你一个问题啊。
ocker 最早其实本身是在 linux 上有了后面才，
实 windows 上才有它自己的呃 docker 嘛，
吧。

苏小旻
对嗯。

面试官  27:16
Docker 最开始设计的时候，
依赖于 linux linux 内核提供了哪些能够以实现的资源隔离？

苏小旻
它提供的能力，
实它就是主要是对我们内核一种复用，
最后就是我们最后就仅仅是我们在我们内核上，
后再添加一些功能。

面试官  27:33
怎么实现的资源隔离，
是你知道 docker 之间
其实每个 docker 的自己的起的这个实力之间，
之间资源是隔离的吗？
你可以实现这个 CPU 的隔离，
内存的隔离，
系统的隔离都可以隔离吗？
对吧？这个内核怎么用什么能力内核把它隔离呢？

苏小旻
用什么能力我觉得好，
记得好像就是对 doctor 写的还是 copy on white 的，
是。

面试官  27:57
但是那个那个那个是靠边上是靠边上的，
个是。

苏小旻
那个是靠边上的，
怎么他怎么实现？

面试官  28:02
比如说这个 CPU 咋个 CPU，
第一个 docker 只能用三个核，
第二个 docker 只能用两个核对吧，
肯定是用不超的。

苏小旻
嗯嗯。

面试官  28:13
没看过是吧这个？
没关系，
我问你，
问你个东西啊，
那我就问，
我就问一下 linux 里面的那个 C group 这个你了解吗？
Control group Control Group C Group.
没看过是吧，
没关系，
其实比较偏内核的东西了。
OK 那那没事，
不问了，
都问的差不多了，
这样，
后那个我们写代码吧。

面试官  28:51
没关系啊，
觉得还是挺不错的，
觉得那个很多问题还是有自己的想法的。


之后就是两道算法题目。
第一道题目是给你一个数组
1，2，3，4，5，6，7，8，9，1，0，1，1，1，2 
数组是确定的，
给你一个 int k ，之后，你返回 数组这个地方的值。
这道题我一开始误会了它的规律，
不对，也不是误会了，
我是没有想清楚它的递进的方式，
也就是把有序的自然数排布，裂开，
感谢面试官非常多的提醒。
之后努力写，但是，
犯下了两个非常愚蠢的错误，
一次是忘记 把位数相乘。
另外一个则是忘记考虑边界情况，也就是正好在一组的结尾返回9的这种情况。

第二道题目就是很简单的双指针，
把重复的数字放到末尾，
保证前面的数字继续有序并且不重复。
没有什么难度。
不过，我自己的逻辑和面试官不太一样，
他愣了一下，
和我讨论了一下，
感觉我的解法比较特别。

真的，
我早上做股票最大收益「三」的时候，也遇到了同样的问题。
我的解法和标准答案的动态规划不太一样，
我选择的是贪心 & 分类讨论，
于是，我就看到，
1. AI没有经过深思熟虑，断定我是错的
2. AI拿出简单用例，以为我是错的
3. AI拿出简单用例，发现我的算法是正确的，于是开始疯狂找反例
4. AI找不到反例，认为我的解法只是碰巧正确，建议我还是参考标答

像是GLM我就不说什么了，它算法题一向做得不好。
千问我也不期待了，幻觉太多，连正则都不会写。
连DeepSeek都在怀疑我……

最后就是反问和回答的环节。

面试官询问
## 我准备了多久面试

- 您是问我学习Java Spring的时间吗？
- 哦，不是啊「如果我说我是八月二十号才开始的，
  而且差不多从十二月就开摆了，
  会不会显得我很水」
- 哦，准备字节的面试。
- 三周……
「也不是，其实，算直到这一面，也有两周了，
也不是，我貌似直到上周五才开始准备，
虽然我周一开始投，
周二就接到了电话，
把定在周三的面试推迟到周五，
再推迟到下周一，
因为玩得太开心了……」

做了多少算法题？在哪里做的？
- LeetCode
- 并没有统计，可能有300道吧。
- 这个数字完全没有参考价值。
- 反正也不是按照LeetCode Hot 100来刷的，
- 按照灵神题库。

我反问：
## 我面试表现得怎样？

- 知识面很广。(也就是学得很杂。)
- 「知识了解得不够深入」
  「面试官应该有这样的感觉，
  不过，他终于放弃在这一点要求我。
  他自己也反复安慰我说，
  我们对于实习生的要求也没有那么高。
  虽然，我感觉，
  那都是我应该深入学习的，
  只不过因为我自己太水，
  当时看到就忘记的内容。」
- 迁移能力不行。(也就是纯八股型选手)
  「其实他看过我的一面，
  当时我回答出来了Zset，
  但是，我自己后来都没有意识到
  Zset也是Elasticsearch的低层的数据结构。
  乃至设计Redis Cluster的时候，
  可以固定哈希槽，
  就能够实现迁移了。
  另外还有进程的虚拟地址和物理内存之间的一个区别，
  写时拷贝的技术
  页表的映射，」
- 没关系，只要你热爱技术，好学就行。
- 你在实习过程中接触这些项目以后，
  慢慢就能够明白了。
- 算法题要多做啊。
  - 三轮面试的算法题都很勉强……
  - 感谢面试官大大的温柔。
- 我不是想要给你压力
  只是希望能够看到你的知识的了解程度
  答不出来其实也没有关系。
- 我会和前两轮的面试官再讨论一下
  写你的评价

